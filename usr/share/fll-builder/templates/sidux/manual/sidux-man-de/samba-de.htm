<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Sidux Manuals - Samba and SSH-de</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style type="text/css">@import url("../lib/css-js/content.css");</style>
	<style type="text/css">@import url("../lib/css-js/menu.css");</style>
	<script type="text/javascript" src="../lib/css-js/menu2.js"></script>
</head>
<body>
<div id="menu">
<!-- menu starts here -->
<img src="../lib/sidux-logo.png" alt="logo" id="menu-header" />
	<ul id="top-list">
		<li><a href="http://sidux.com/">Zur&#252;ck zum sidux Hauptmen&#252;</a></li>
	</ul>
<!--<h2>Welcome to the Official Sidux Manual version sidux-manual-static-proof-22</h2>-->
	<ul>
<!-- menu last updated by bluewater 05/01/2007 1300hrs ADEST 05/01/2007 0200hrs UTC -->
		<li  onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-de.htm">Willkommen bei sidux</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-de.htm#welcome-gen">Offizielles Handbuch</a></li>
				<li><a href="welcome-de.htm#how-to">Tipps zum Handbuch</a></li>
				<li><a href="help-de.htm#for-wiki">Wo es Hilfe gibt</a></li>
				<li><a href="credits-de.htm#cred-team">Danksagung</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-content-de.htm">CD Inhalt</a>
			<ul class="sub-menu" id="sm2">
				<li><a href="cd-content-de.htm#cd-content">CD Inhalt</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="cd-dl-burning-de.htm">CD Herunterladen &amp; Brennen</a>
			<ul class="sub-menu" id="sm6">
				<li><a href="cd-dl-burning-de.htm#download-sidux">CD Herunterladen&amp;Brennen</a></li>
				<li><a href="cd-dl-burning-de.htm#md5">md5 Pr&#252;fsummen</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-nero">Brennen in Windows</a></li>
				<li><a href="cd-dl-burning-de.htm#burn-linux">Brennen in Linux</a></li>
				<li><a href="cd-dl-burning-de.htm#IO-errors">Ein-/Ausgabefehler</a></li>
				<li><a href="cd-dl-burning-de.htm#xdelta">xdelta Patches</a></li>
				<li><a href="cd-no-gui-burn-de.htm#burning-no-gui">Brennen ohne GUI</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="live-mode-de.htm">LiveCD Modus</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="live-mode-de.htm#rootpw">Das Rootpasswort der sidux-LiveCD</a></li>
				<li><a href="live-mode-de.htm#unionfs">Unionfs - Software im LiveCD Modus installieren</a></li>
				<li><a href="live-mode-de.htm#ntfs-3g">Schreiben auf NTFS Partitionen mit ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="term-konsole-de.htm">Der Terminal / die Konsole</a>
			<ul class="sub-menu" id="sm9">
				<li><a href="term-konsole-de.htm#konsole"> Terminal/Konsole</a></li>
				<li><a href="term-konsole-de.htm#cli-help">Kommadozeilenhilfe</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="cheatcodes-de.htm">Boot CheatCodes</a>
			<ul class="sub-menu" id="sm7">
				<li><a href="cheatcodes-de.htm#cheatcodes">Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-de.htm#vga">VGA Codes</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="part-gparted-de.htm">Partitionieren der Festplatte</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="part-gparted-de.htm#partition">mit GParted</a></li>
				<li><a href="part-gparted-de.htm#ntfs">NTFS-Partitionen mit GParted &#228;ndern</a></li>
				<li><a href="part-cfdisk-de.htm#disknames">Namen der Festplatten</a></li>
				<li><a href="part-cfdisk-de.htm#partition">mit cfdisk</a></li>
				<li><a href="part-cfdisk-de.htm#formating">Formatieren mit cfdisk</a></li>
				<li><a href="part-size-examp-de.htm#part-example">Partitionsgr&#246;&#223;en: Beispiele</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="internet-connecting-de.htm">Internet und Netzwerk</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="ntp-server-de.htm#ntp-server">TimeServer Setup</a></li>
				<li><a href="internet-connecting-de.htm#internetsharing">Internet teilen</a></li>
				<li><a href="samba-de.htm#ssh-x">X Window Programme via SSH verwenden</a></li>
				<li><a href="samba-de.htm#ssh-f">GUI SSH mit Konqueror</a></li>
				<li><a href="samba-de.htm#ssh-w">SSH X-Forwarding von Windows</a></li>
				<li><a href="samba-de.htm#ssh-s">SSH Configuration</a></li>
				<li><a href="internet-connecting-de.htm#dial-mod">56k Modems</a></li>
				<li><a href="samba-de.htm#configure">SAMBA Windows Freigaben nutzen</a></li>
				<li><a href="samba-de.htm#setup">Samba Server aufsetzen</a></li>
				<li><a href="internet-connecting-de.htm#ndiswrapper">Ndiswrapper</a></li>
				<li><a href="internet-connecting-wpa-de.htm#wpa">WIFI-WLAN</a></li>
				<li><a href="internet-connecting-de.htm#netcardconfig">Internet &amp; Netzwerk</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hd-install-de.htm">Installationsoptionen</a>
			<ul class="sub-menu" id="sm8">
				<li><a href="hd-install-de.htm#Inst-prep">Vorbereiten der Installation</a></li>
				<li><a href="hd-install-de.htm#Installation">Installation auf die Festplatte</a></li>
				<li><a href="hd-install-de.htm#first-hd-boot">Erstes Booten von der Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#perst-home">Permanentes Homeverzeichnis</a></li>
				<li><a href="hd-install-opts-de.htm#fromiso">Booten 'fromiso'</a></li>
				<li><a href="hd-install-opts-de.htm#usb-hd">Installation auf eine USB-Festplatte</a></li>
				<li><a href="hd-install-opts-de.htm#qemu">Installation &#252;ber qemu</a></li>
			</ul>
		</li>

		<li  onmouseover="showHide( 10 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-de.htm">Graphikkarten, Hardware Ger&#228;te und Treiber</a>
			<ul class="sub-menu" id="sm10">
				<li><a href="hw-dev-hw-dri-de.htm#nvidia-3d">nVidia 3d</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#ati-3d">ATI 3d</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-nv">Native nv</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#native-ati">Native ati</a></li>
				<li><a href="hw-dev-hw-dri-de.htm#hd-ntfs3g">HD Schreiben auf NTFS Partitionen mit ntfs-3g</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="wm-kde-de.htm">Fenstermanager</a>
			<ul class="sub-menu" id="sm12">
				<li><a href="wm-kde-de.htm#desk-freeze">KDE Desktop friert ein</a></li>
				<li><a href="wm-kde-de.htm#kde-login">Kein Login in KDE</a></li>
				<li><a href="wm-kde-de.htm#ch-th">Themes &#228;ndern</a></li>
			</ul>
		</li>
		<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="sys-admin-apt-de.htm">System Administration</a>
			<ul class="sub-menu" id="sm11">
				<li><a href="sys-admin-apt-de.htm#apt-cook">APT Kochbuch</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-install">Neue Pakete installieren</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-delete">Pakete l&#246;schen</a></li>
				<li><a href="sys-admin-apt-de.htm#apt-upgrade">Upgrade eines installierten Systems</a></li>
				<li><a href="sys-admin-upgrade-de.htm#live-cd-upgrade">Upgrade durch die LiveCD</a></li>
				<li><a href="sys-admin-upgrade-de.htm#hd-upgrade">Upgrade einer Festplatteninstallation</a></li>
				<li><a href="sys-admin-kern-upg-de.htm#kern-upgrade">Upgrade des Kernels</a></li>
				<li><a href="sys-admin-rdiff-de.htm#rdiff">Backing Up with rdiff</a></li>
				<li><a href="vir-rkits-de.htm#virus-rkits">Virus and Rootkit Scanners</a></li>
				<li><a href="sys-admin-de.htm#start-services">Einen Dienst in sidux starten</a></li>
				<li><a href="sys-admin-de.htm#pw-lost">Root Passwort vergessen</a></li>
				<li><a href="sys-admin-de.htm#mon-res">Aufl&#246;sung des Bildschirms</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#mbr-grub-boot">MBR - Bootsektor &#252;berschrieben</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#boot-grub-floppy">Eine Boot-Floppy erstellen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#remove-grub">Grub vom MBR enfernen</a></li>
				<li><a href="sys-admin-grub-bootman2-de.htm#what-is-grub">Grub der Bootmanager</a></li>
			</ul>
		</li>
	</ul>
<!-- menu ends here -->
</div>
<div id="main-page">
	<div class="divider" id="configure">
		<h2>SAMBA Konfiguration um mit sidux &#252;ber das Netzwerk auf Windows-Freigaben zugreifen zu k&#246;nnen</h2>

		<ul>
			<li><p>Alle Befehle in einem Terminal oder einer Konsole als <b>root</b> ausf&#252;hren.</p></li>

			<li><p>Die URL in Konqueror als <b>normaler User aufrufen</b>.</p>
			<p class="data">server = servername oder IP der Windows Maschine<br />share = Name der Freigabe</p></li>
		</ul>

		<p>In KDE - Konqueror die URL eingeben: <span class="highlight-3">smb://server</span> oder den gesamten Pfad (URL): <span class="highlight-3">smb://server/share</span></p>

		<p>In einer Konsole kannst Du die Freigaben auf einem Server sehen mit:</p>
		<pre>root@0[sidux]# smbclient -L server</pre>

		<p>Um eine Freigabe in einem Verzeichnis zu sehen (mit Zugriff f&uuml;r ALLE User), nicht vergessen: Der Mountpoint muss existieren. Wenn nicht, musst Du erst das Verzeichnis erstellen (der Name ist beliebig):</p>
		<pre>root@0[sidux]# mkdir -p /media/server_share</pre>

		<p>Dann mounte die Freigabe (Dateisystem ist VFAT):</p>
		<pre>root@0[sidux]# mount -t smbfs -o username=Administrator,fmask=777,dmask=777 //server/share /media/server_share</pre>

		<p>oder bei NTFS:</p>
		<pre>root@0[sidux]# mount -t smbfs -o username=Administrator,fmask=777,dmask=777,lfs //server/share /media/server_share</pre>

		<p>Um die Verbindung zu beenden:</p>
		<pre>root@0[sidux]# umount /media/server_share</pre>

		<p>Wenn Du einen Eintrag in der <span class="highlight-3">/etc/fstab</span> m&ouml;chtest, um das mounten zu vereinfachen, dann erg&auml;nze fstab um eine Zeile wie:</p>
		<pre>//server/share /media/server_share smbfs defaults,username=dein_username,password=**********,fmask=777,dmask=777  0   0</pre>
	</div>
	<div class="divider" id="setup">
		<h2>sidux als Samba-Server aufsetzen</h2>

		<p>Um von der sidux Live-CD einen simplen Samba-Server aufzusetzen bzw. zu starten, musst Du nur das Script <b>sambastart</b> aurufen, welches Du auch im KDE-Men&#252; unter sidux-Server findest.</p>

		<p>Bei einer HD-Install ist es aus Sicherheitsgr&#252;nden notwendig, die Samba-Konfiguration anzupassen. Wenn Du mehr &#252;ber Samba und den Betrieb eines Samba-Servers wissen willst, ist es sinnvoll, die <a  href="http://samba.sernet.de/info.html">Samba Dokumentation</a> zu lesen. Hier ein einfaches Beispiel:</p>

		<p>Um die Samba Konfiguration anzupassen:</p>

		<p>&#214;ffne die Datei <span class="highlight-3">/etc/samba/smb.conf</span> in einem Editor (z.b. Kate) und gib folgendes ein:</p>

		<pre># Globale Changes - Proposal everything simple as possible - no passwords, perform like Windows 9x

[global]
security = share
workgroup = WORKGROUP

# Freigeben ohne Schreibrechte - wichtig, wenn NTFS Partitionen freigegeben werden!

[WINDOWS]
comment = Windows Partition
browseable = yes
writable = no
path = /media/XXXX # &lt;-- passe dies an Deine Partition an
public = yes

# Freigeben einer Partition mit Schreibrechten - die Partition muss gemounted sein
# schreibbar macht Sinn z.b. mit Fat32

[DATA]
comment = Data Partition (first extended Partition)
browseable = yes
writable = yes
path = /media/hda5
public = yes</pre>

		<p>Sichern nicht vergessen. Du kannst nun Samba starten/stoppen mit:</p>
		<pre>root@0[sidux]# /etc/init.d/samba start</pre>
		<p>oder</p>
		<pre>root@0[sidux]# /etc/init.d/samba stop</pre>

		<p>Du kannst Samba auch automatisch beim Booten starten:</p>
		<pre>root@0[sidux]# unfreeze-rc.d
update.rc.d samba defaults
freeze-rc.d</pre>

		<p>Samba startet jetzt beim Booten.</p>

	</div>
		<div class="divider" id="ssh-s">
			<h2>Enabling good security protocols for SHH</h2>

				<p>Allowing root login, via ssh, is not secure. we do not want root users logging in at all by default, debian should be secure, not insecure nor do we want to give users 10 minutes to do a quick dictionary password attack on our ssh login therefore, its up to you to limit the time and attempts!</p>

 				<p>To help make your ssh more secure, simply take our favorite text editor, and open it with root privileges, then open this file:</p>
<pre>
/etc/ssh/sshd_config
</pre>
				<p>Then we locate the offending items, and change them.</p>

				<h6>The offending items you need to locate are the following:</h6>

 				<p><span class="highlight-3">Port &lt;desired port&gt;:</span> This must be set to the correct port that you are forwarding from your router. Port forwarding must also be setup in your router. If you don't know how to do that, maybe you shouldn't be using ssh remotely. Debian sets the default to port 22, however its recommended that you use a port  out of the standard scan range. let's say we use port 5874 so that becomes:</p>
<pre>
Port 5874
</pre>
 				<p><span class="highlight-3">ListenAddress &lt;ip of machine or network interface&gt;:</span> Now, of course, since you are forwarding a port from your router, you need the machine to have a static ip address on the network, unless you are using a  dns server locally, but if you're doing something that complicated and need these directions you are probably making a huge mistake So let's say it's this: </p>
<pre>
ListenAddress 192.168.2.134
</pre>
				<p>Next, Protocol 2 is already a debian default, but check to make sure:</p>

 				<p><span class="highlight-3">LoginGraceTime &lt;seconds to allow for login&gt;:</span> This has an absurd default of 600 seconds. It does not take you 10 minutes to type in your user name and password, so lets make that sane:</p>
<pre>
LoginGraceTime 45
</pre>
 				<p>Now you have 45 seconds to login and hackers do not have 600 seconds each attempt to crack your password</p>

				<p><span class="highlight-3">PermitRootLogin &lt;yes&gt;:</span> Why debian makes PermitRootLogin 'yes', is incomprehensible so we fix that to 'no'</p>
<pre>
PermitRootLogin no
</pre>

<pre>
StrictModes yes
</pre>
 				<p><span class="highlight-3">MaxAuthTries&lt;xxx&gt;:</span> Number of attempts to login,you can  make it 3 or 4 attempts but no more than that</p>
<pre>
MaxAuthTries 2
</pre>
 				<p>You may need to add any of these items if they are not present:</p>
<pre>
AllowUsers user names with spaces allowed to access via ssh
</pre>
 				<p><span class="highlight-3">AllowUser&lt;xxx&gt;:</span> make an ssh only user with no rights use adduser to add the user, then put their name here, like:</p>
<pre>
AllowUser whomevertheuseris
</pre>
 				<p><span class="highlight-3">PermitEmptyPasswords &lt;xxx&gt;:</span> give that user a nice long password that is impossible to guess ever in a million years that is the only user allowed to ssh in. Once you are in, you can just su to root:</p>
<pre>
PermitEmptyPasswords no
</pre>
				<p><span class="highlight-3">PasswordAuthentication &lt;xxx&gt;:</span> obviously, for password login, not key login, you need passwords to be full unless using keys, you need this to be yes</p>
<pre>
PasswordAuthentication yes [unless using keys]
</pre>
				<p>Finally:</p>
<pre>
/etc/init.d/ssh restart
</pre>
 				<p>Now you have somewhat more secure ssh not fully secure, just better, including creating an ssh only user with adduser</p>

	</div>

	<div class="divider" id="ssh-x">
		<h2>X-Windows Programme &#252;ber SSH-verschl&#252;sselte lokale Netzwerkverbindungen verwenden</h2>

		<p>Ein Programm l&#228;uft auf einem Remote Computer, die Graphische Benutzeroberfl&#228;che (GUI) wird auf dem lokalen PC angezeigt.</p>

		<p>Annahmen:<br />
		* sidux<br />
		* IP des lokalen PCs: 192.168.1.10/24 (nur X11-Bildausgabe des Programmes)<br />
		* IP des Remote PCs: 192.168.1.2/24 (hier l&#228;ft das X11 Programm)</p>

		<h6>Konfiguration:</h6>

		<p>Auf dem remote PC wird die <span class="highlight-3">/etc/hosts.allow</span> um folgende Zeile erweitert:</p>
<pre>
ssh sshd : 192.168.1.0/24 : ALLOW 
# e.g. erlaubt (allow) allen Adressen im lokalen Netzwerk 
#(local area network, LAN) den Zugriff &#252;ber den ssh server
</pre>

		<p>&#214;ffne eine Konsole und benutze folgenden Befehl. Dies baut eine SSH Verbindung und X-Forwarding auf:</p>
<pre>
ssh -X 192.168.1.2
(das eigene SSH Passwort eingeben, wenn danach gefragt wird,
oder das Passwort zum SSH Key, wenn der eigene Public-Key zum
Remote Rechner geschickt und dort den User authorized_keys Dateien
hinzugef&#252;gt wurde)
</pre>

		<p>Aufrufen des X-Programmes in der Shell, z.B. 'iceweasel':</p>
<pre>
ssh -X 192.168.1.2
(das eigene SSH Passwort eingeben, wenn danach gefragt wird,
oder das Passwort zum SSH Key, wenn der eigene Public-Key zum
Remote Rechner geschickt und dort den User authorized_keys Dateien
hinzugef&#252;gt wurde)
iceweasel
</pre>

	</div>
	<div class="divider" id="ssh-w">
		<h2>Remote Zugriff von einem Windows-PC unter Nutzung von SSH und X-Forwarding:</h2>

		<p>* Herunterladen und Brennen von <a href="http://xlivecd.indiana.edu/">Cygwin XLiveCD</a><br />
		* Die CD ins Laufwerk einlegen und auf den automatischen Start (autorun) warten<br />
		* Weiter (continue) klicken bis sich ein Shell Fenster &#246;ffnet.<br />
		* Folgenden Befehl eingeben:</p>
<pre>
ssh -X username@xxx.xxx.xxx.xxx
</pre>

		<p><span class="highlight-1">Beachte: xxx.xxx.xxx.xxx ist die IP des Linux Remote PCs oder seine URL (z.B. eines dyndns.org Accounts), und der Username ist nat&#252;rlich der eines User Accounts der auf dem Remote Rechner existiert.</span> Nach erfolgreichem Login kann man zum Beispiel 'kmail' starten und seine Mails abrufen.</p>

		<p>Wichtig: hosts.allow muss einen Eintrag beinhalten, der auch Rechnern aus anderen Netzwerken den Zugriff erlaubt. Wenn man einen Router oder eine NAT-Firewall verwendet, muss Port 22 zum Linuxrechner weitergeleitet (portforwarding) sein.</p>
	</div>
	<div class="divider" id="ssh-f">
		<h2>SSH mit Konqueror</h2>

		<p>Konqueror hat ein Protokoll f&#252;r grafische SSH Verbindungen, das <span class="highlight-1">fish://</span> Protokoll.</p>

		<p>Wie's gemacht wird:<br />
		1) Ein Konqueror Fenster &#246;ffnen<br />
		2) In das Adressfeld: <span class="highlight-3">fish://username@ssh-server.com</span> eingeben.</p>
		<p>Beispiel 1: Ein Popup &#246;ffnet sich und fragt nach dem SSH Passwort, nun das Passwort eingeben und OK klicken:</p>
<pre>
fish://sidux1@my-home-server.dyndns.org
</pre>
		<p>Beispiel 2: So wird nicht nach einem Passwort gefragt, man wird direkt verbunden.</p>
<pre>
fish://username:password@ssh-server.com
</pre>

		<p>Die SSH Verbindung ist nun hergestellt. In diesem Konqueror Fenster kann man mit den Dateien auf dem SSH Server arbeiten, als w&#228;ren es lokale Dateien.</p>
	</div>
	<div class="spacer05"></div>

</div>
</body>
</html>


